FROM ubuntu:22.04

COPY app/src /opt/app/src
COPY app/Makefile /opt/app/Makefile

RUN export DEBIAN_FRONTEND=noninteractive && \
    apt-get update && \
    apt-get --yes --no-install-recommends install \
        bash \
        gcc \
        make \
        libc6-dev && \
    apt-get --yes clean && \
    apt-get --yes autoremove && \
    rm -Rf /var/lib/apt/lists/* && \

RUN cd /opt/app && \
    make && \
    ln -s /opt/app/build/main /usr/local/bin/app
